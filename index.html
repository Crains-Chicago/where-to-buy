---
layout: base
---

<div class="row">
  <div class="col-xs-12">
    <h1 class="title">
      <i class="fa fa-lg fa-home"></i> Where to Buy
      <small>Find the right Chicagoland real estate for you.</small>
    </h1>
    <hr />
  </div>
</div>

<div class="row">
  <div class="col-xs-12">
    <h3>I am...</h3>
  </div>
</div>

<div class="row">
  <div class="col-xs-12">
    <div class="carousel">
      <a href="#" role="button" id="suburban-home">
        <div class="carousel-cell text-center">
          <span class="carousel-title">Suburban family</span>
        </div>
      </a>
      <a href="#" role="button" id="city-home">
        <div class="carousel-cell text-center">
          <span class="carousel-title">City family</span>
        </div>
      </a>
      <a href="#" role="button" id="downsized-home">
        <div class="carousel-cell text-center">
          <span class="carousel-title">Empty-nesters</span>
        </div>
      </a>
      <a href="#" role="button" id="in-town">
        <div class="carousel-cell text-center">
          <span class="carousel-title">Weekenders</span>
        </div>
      </a>
      <a href="#" role="button" id="vacation-home">
        <div class="carousel-cell text-center">
          <span class="carousel-title">Vacationers</span>
        </div>
      </a>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-3 text-center">
    <h3>My priorities</h3>
    <p class="small help-block">Drag to change</p>
  </div>
  <div class="col-md-5 text-center">
    <form>
      <div class="form-group">
        <div class="col-xs-12">
          <div class="input-group">
            <input class="form-control input-lg search-text" id="search-address" placeholder="Set your work address (optional)" type="text" style="width:100%" />
            <div class="input-group-btn">
              <input class="btn btn-primary btn-lg" id="search-button" type="button" value="Search" />
            </div>
          </div>
        </div>
      </div>
      </form>
  </div>
  <div class="col-md-4 text-center">
    <h3>Best communities</h3>
    <p class="small help-block">Based on your priorities</p>
  </div>
</div>

<div class="row">
  <div class="col-md-3 well" style="height:350px;">
    <div class="grid">
      <div class="grid-item text-center" id="diversity"><span class="badge">1</span> High Diversity</div>
      <div class="grid-item text-center" id="schools"><span class="badge">2</span> Good Schools</div>
      <div class="grid-item text-center" id="crime"><span class="badge">3</span> Low Crime</div>
      <div class="grid-item text-center" id="price"><span class="badge">4</span> Solid Price Growth</div>
      <div class="grid-item text-center" id="commute"><span class="badge">5</span> Short Commutes</div>
    </div>
  </div>
  <div class="col-md-5">
    <div id="map"></div>
  </div>
  <div class="col-md-4">
    <div class="table-responsive">
      <table class="table table-striped table-bordered table-hover" id="best-communities">
        <tbody>
          <tr>
            <td class="ranking">1. <span id="rank-1">Hyde Park</span></a></td>
          </tr>
          <tr>
            <td class="ranking">2. <span id="rank-2">Rogers Park</span></a></td>
          </tr>
          <tr>
            <td class="ranking">3. <span id="rank-3">South Shore</span></a></td>
          </tr>
          <tr>
            <td class="ranking">4. <span id="rank-4">Andersonville</span></a></td>
          </tr>
          <tr>
            <td class="ranking">5. <span id="rank-5">Lincoln Park</span></a></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Community information modal -->
<div class="modal fade" id="community-info" tabindex="-1" role="dialog" aria-labelledby="community-info-label"aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h2 class="modal-title" id="community-info-label">Community Information</h2>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
        </div>
      </div>
    </div>
  </div>
</div>

<style id="boundary-styles">
  #places{
  polygon-fill: #FF6600;
  polygon-opacity: 0.7;
  line-color: #FFF;
  line-width: 0.5;
  line-opacity: 1;
  }
</style>

<script src="assets/js/leaflet.js"></script>
<script src="assets/js/leaflet-google.js"></script>
<script src="assets/js/tether.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/draggabilly.pkgd.min.js"></script>
<script src="assets/js/packery.pkgd.min.js"></script>
<script src="assets/js/flickity.pkgd.min.js"></script>
<script src="assets/js/wheretobuy.js"></script>
<script>

  $(function() {
      // Initialize map and other goodies
      WhereToBuy.initialize();

      // Get the profile and priority widgets going
      var $carousel = $('.carousel').flickity();
      var $grid = $('.grid').packery({
          percentPosition: true,
          itemSelector: '.grid-item',
          gutter: 10,
      });

      // Allow user to drag around priorities
      $('.grid-item').each(function(i, gridItem) {
          var drag = new Draggabilly(gridItem);
          $grid.packery('bindDraggabillyEvents', drag);
      });

      // Show priority order after layout
      function rankPriorities() {
        var items = $grid.packery('getItemElements');
        $(items).each(function(i, item) {
            $(item).find('span').html(i+1);
        });
      }

      // Init priority order
      $grid.on('layoutComplete', rankPriorities);
      $grid.on('dragItemPositioned', rankPriorities);

      // Define UX for the community rankings
      $('.ranking').click(function() {
          $('.modal').modal();
      });

      // Init search address
      var autocomplete = new google.maps.places.Autocomplete(document.getElementById('search-address'));

      // Bind click and return events for the search bar
      $('#search-button').on('click', WhereToBuy.addressSearch);
      $('body').on('keypress', '#search-address', function(e) {
          if (e.keyCode == 13) {
              e.preventDefault();
              $('#search-button').click();
          }
      });
  });

</script>